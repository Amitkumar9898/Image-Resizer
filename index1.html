<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style1.css" />
    <title>IMAGE RESIZER</title>
    <script defer src="script1.js"></script>
</head>

<body>
    <div class="header">
        <div><i class="gg-head"></i></div>
        <div>
            <a href="index.html">Image Resizer.com</a>
        </div>
        <ul class="list">
            <li>
                <a class="headlist" href="index.html">
                    <div class="headdlist1">
                        <span>Image Shrinker</span>
                    </div>
                </a>
            </li>
            <li>
                <a class="headlist" href="cropindex.html">
                    <div class="headdlist1">
                        <span>Image Crop</span>
                    </div>
                </a>
            </li>
            <li>
                <a class="headlist" href="flipindex.html">
                    <div class="headdlist1">
                        <span>Image Flip</span>
                    </div>
                </a>
            </li>
        </ul>
    </div>
    <div class="hr01"></div>
    <div class="fullborder">
        <div class="mainbody">
            <div class="resize">
                <a href="index1.html">
                    <button id="button1">
                        <i class="gg-resize"></i>
                        <span style="font-size:21px; margin-left: 5px;">Resize</span>
                    </button>
                </a>
            </div>
            <div class="crop active">
                <a href="crop1.html">
                    <button id="button2">
                        <i class="gg-crop"></i>
                        <span style="font-size:21px; margin-left: 5px;">Crop</span>
                    </button>
                </a>
            </div>
            <div class="fliprotate active">
                <a href="flip1.html">
                    <button id="button3">
                        <i class="gg-flip"></i>
                        <div class="npm" >
                        <span style="font-size:21px; font-style: normal; margin-left: 5px;">Fliprotate</span>
                        </div>
                    </button>
                </a>
            </div>
            <div class="hr"></div>

            <div class="text1">Resize Settings</div>
            <div class="col" id="frm">
                <div class="content">
                    <div class="short-content-two">
                        <div class="text0">Enter Sizes</div>
                        <div class="text12">Height</div>
                        <div class="height">
                            <input onClick="test()" type="number" id="input-height" placeholder="enter height"
                                value="400" onchange="upload(this)">
                        </div>
                        <div class="text01">Width</div>
                        <div class="width">
                            <input onClick="test()" type="number" id="input-width" placeholder="enter Width" value="400"
                                onchange="upload(this)">
                        </div>


                        <div class="select type">
                            <select id="input-type" onchange="upload(this)">
                                <option value="">Select type</option>
                                <option value="image/jpeg">Jpeg</option>
                                <option value="image/png">png</option>
                                <option value="image/jpg">jpg</option>
                            </select>
                        </div>


                        <div class="select unit">
                            <select id="input-type1" onchange="upload(this)">
                                <option value="">Select Unit</option>
                                <option value="px">px</option>
                                <option value="dpi">dpi</option>
                                <option value="cm">cm</option>
                            </select>
                        </div>

                        <div class="hr1"></div>
                        <div class="aspect">
                            <label>Aspect Ratio</label>
                            <input type="checkbox" id="input-aspect" onchange="upload(this)">
                        </div>
                        <div><canvas id="canvas"></canvas></div>
                        <div><button class="download">Download Image</button></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="view">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <center><img id="preview" height="400px" width="400px" src="" alt="thumbnail"></img></center>
        </div>
    </div>
   
    <script>
        function test() {
            console.log("testing the function")
        }
        async function upload(value) {
            console.log("value", value.value);
            let ele = document.getElementById('preview')
            ele.setAttribute('height', value.value)
            ele.setAttribute('width', value.value)

        }

        const downloadBtn = document.querySelector("button.download");

        downloadBtn.addEventListener('click', function () {
            let tempLink = document.createElement('a');

            let fileName = `image.jpg`;

            tempLink.download = fileName;
            tempLink.href = document.getElementById('canvas').toDataURL("image/png");

            tempLink.click();
        });


        window.onload = function () {
            set()
        }
        function set() {
            const thumbnail = localStorage.getItem('thumbnail');

            const previewImage = document.getElementById('preview');
            // console.log(previewImage, previewImage.src);
            if (thumbnail) {
                console.log("if");
                console.log(thumbnail);  
                previewImage.src = thumbnail;
                console.log(previewImage);
            }
            else {
                console.log("else");
                previewImage.src = 'https://m.media-amazon.com/images/I/51JyAXaBz3L.j'
            }
        }
    </script>
</body>

</html>
